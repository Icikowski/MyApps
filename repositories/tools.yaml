name: tools
description: Handy tools for everyday work
maintainer: Piotr Icikowski
contents:
  - name: bat
    description: A cat(1) clone with syntax highlighting and Git integration
    newest_version_check:
      - curl -Ls -o /dev/null -X HEAD "https://github.com/sharkdp/bat/releases/latest" -w %{url_effective} | sed 's#.*/##; s/v//'
    current_version_check:
      - bat --version | sed 's/bat //'
    install_scenario:
      - wget -q -O ${TEMP}/bat.tgz "https://github.com/sharkdp/bat/releases/download/v${LATEST_VERSION}/bat-v${LATEST_VERSION}-x86_64-unknown-linux-musl.tar.gz"
      - (cd ${TEMP}; tar -xzf bat.tgz --strip-components=1)
      - cp ${TEMP}/bat /usr/local/bin/bat
      - chmod a+x /usr/local/bin/bat
      - cp ${TEMP}/autocomplete/bat.bash /etc/bash_completion.d/bat
      - chmod a+x /etc/bash_completion.d/bat
    update_scenario:
      - rm -rf /usr/local/bin/bat
      - rm -rf /etc/bash_completion.d/bat
      - wget -q -O ${TEMP}/bat.tgz "https://github.com/sharkdp/bat/releases/download/v${LATEST_VERSION}/bat-v${LATEST_VERSION}-x86_64-unknown-linux-musl.tar.gz"
      - (cd ${TEMP}; tar -xzf bat.tgz --strip-components=1)
      - cp ${TEMP}/bat /usr/local/bin/bat
      - chmod a+x /usr/local/bin/bat
      - cp ${TEMP}/autocomplete/bat.bash /etc/bash_completion.d/bat
      - chmod a+x /etc/bash_completion.d/bat
    uninstall_scenario:
      - rm -rf /usr/local/bin/bat
      - rm -rf /etc/bash_completion.d/bat
  - name: lazygit
    description: simple terminal UI for git commands 
    newest_version_check:
      - curl -Ls -o /dev/null -X HEAD "https://github.com/jesseduffield/lazygit/releases/latest" -w %{url_effective} | sed 's#.*/##; s/v//'
    current_version_check:
      - lazygit --version | sed "s/.*version=\([0-9.]*\).*/\1/"
    install_scenario:
      - wget -q -O ${TEMP}/lazygit.tgz "https://github.com/jesseduffield/lazygit/releases/download/v${LATEST_VERSION}/lazygit_${LATEST_VERSION}_Linux_x86_64.tar.gz"
      - (cd ${TEMP}; tar -xzf lazygit.tgz)
      - cp ${TEMP}/lazygit /usr/local/bin/lazygit
      - chmod a+x /usr/local/bin/lazygit
    update_scenario:
      - rm -rf /usr/local/bin/lazygit
      - wget -q -O ${TEMP}/lazygit.tgz "https://github.com/jesseduffield/lazygit/releases/download/v${LATEST_VERSION}/lazygit_${LATEST_VERSION}_Linux_x86_64.tar.gz"
      - (cd ${TEMP}; tar -xzf lazygit.tgz)
      - cp ${TEMP}/lazygit /usr/local/bin/lazygit
      - chmod a+x /usr/local/bin/lazygit
    uninstall_scenario:
      - rm -rf /usr/local/bin/lazygit
  - name: yq
    description: yq is a portable command-line YAML processor 
    newest_version_check:
      - curl -Ls -o /dev/null -X HEAD "https://github.com/mikefarah/yq/releases/latest" -w %{url_effective} | sed 's#.*/##; s/v//'
    current_version_check:
      - yq --version | sed "s/.*version \([0-9.]*\).*/\1/"
    install_scenario:
      - wget -q -O ${TEMP}/yq.tgz "https://github.com/mikefarah/yq/releases/download/v${LATEST_VERSION}/yq_linux_amd64.tar.gz"
      - (cd ${TEMP}; tar -xzf yq.tgz)
      - cp ${TEMP}/yq_linux_amd64 /usr/local/bin/yq
      - chmod a+x /usr/local/bin/yq
      - cp ${TEMP}/yq.1 /usr/local/share/man/man1/yq.1
      - chmod 0644 /usr/local/share/man/man1/yq.1
    update_scenario:
      - rm -rf /usr/local/bin/yq
      - rm -rf /usr/local/share/man/man1/yq.1
      - wget -q -O ${TEMP}/yq.tgz "https://github.com/mikefarah/yq/releases/download/v${LATEST_VERSION}/yq_linux_amd64.tar.gz"
      - (cd ${TEMP}; tar -xzf yq.tgz)
      - cp ${TEMP}/yq_linux_amd64 /usr/local/bin/yq
      - chmod a+x /usr/local/bin/yq
      - cp ${TEMP}/yq.1 /usr/local/share/man/man1/yq.1
      - chmod 0644 /usr/local/share/man/man1/yq.1
    uninstall_scenario:
      - rm -rf /usr/local/bin/yq
      - rm -rf /usr/local/share/man/man1/yq.1
